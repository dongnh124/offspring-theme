{%- if section.settings.enable -%}
<style>
  .js-recently-view-button {
    position: fixed;
    z-index: 1;
    background-size: contain;
    background-position: center;
    bottom: calc(3vh + 60px);
    right: 4vh;
    width: 50px;
    height: 50px;
    line-height: 50px;
    text-align: center;
    cursor: pointer;
    display: block;
    border: 1px solid;
    border-radius: 50%;
    overflow: hidden;
    opacity: 0;
    visibility: hidden;
    transition: all ease .3s
  }

  .js-recently-view-button.active {
    opacity: 1;
    visibility: visible
  }

  @media (max-width:767px) {
    .js-recently-view-button {
      bottom: 3vh;
      right: 3vh
    }
  }

  .js-recently-view-content .x-grid-item{
    max-width: 33.333333%;
    flex: 0 0 33.333333%;
    margin-bottom: 16px;
    padding: 0 8px;
  }

  @media (max-width:991px){
    .js-recently-view-content .x-grid-item{
      max-width: 50%;
      flex: 0 0 50%;
    }
  }

  @media (max-width:767px){
    .js-recently-view-content .x-grid-item{
      max-width: 100%;
      flex: 0 0 100%;
    }
  }

  .js-recently-view-content .x-grid-wrap{
    border: 1px solid var(--g-border-1);
    border-radius:4px;
  }

  .js-recently-view-content .x-grid-image{
    width: 90px;
    height: 100px;
    object-fit: cover;
  }
</style>

<a data-tooltip="true" title="{{section.settings.title}}" href="javascript:void(0)" class="js-recently-view-button" data-toggle="modal" data-target="#jsRecentlyViewed" data-limit="{{section.settings.limit}}">
</a>
<div class="modal fade" id="jsRecentlyViewed" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog--viewed modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        {%- if section.settings.title != blank -%}
        <h4>{{section.settings.title}}</h4>
        {%- endif -%}
        <button type="button" class="close" data-dismiss="modal">{%- include 'icon-close' -%}</button>
      </div>
      <div class="modal-body">
        <div class="row js-recently-view-content mx-n2">
        </div>
      </div>
    </div>
  </div>
</div>
{%- endif -%}

{% schema %}
{
  "name": "Recently Viewed",
  "settings": [
    {
      "type": "checkbox",
      "id": "enable",
      "label": "Enable",
      "default":true
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default":"Recently viewed"
    },
    {
      "type": "range",
      "id": "limit",
      "label": "Limit",
      "min": 2,
      "max": 6,
      "step": 1,
      "default": 4
    }
  ]
}
{% endschema %}
